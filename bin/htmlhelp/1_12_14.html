<h1>原型</h1>
<div class="dc">TInteger queue(TString key, TInteger maxServer, TInteger maxQueue, TInteger waitTime)</div><h1>说明</h1>
<div class="dc">对业务逻辑的执行进行排队</div><h1>参数</h1>
<div class="dc"><h4>key</h4>
<div class="dc">字符串，同一个排队必须使用同样的key</div>
<h4>maxServer</h4>
<div class="dc">最大的服务者个数，之后这么多可以接受服务，其它的必须首先排队。该值在0-100之间的数。</div>
<h4>maxQueue</h4>
<div class="dc">能够排入队列的最大个数，该值在0-100之间的数。</div>
<h4>waitTime</h4>
<div class="dc">在队列中的最大等待时间</div>
</div><h1>返回</h1><div class="dc">
0: 得到服务，1: 排入队列，2: 队列满</div><h1>示例</h1><div class="dc">
#progma c<br>
void work()<br>
{<br>
&nbsp;&nbsp;&nbsp;print('begin work');<br>
&nbsp;&nbsp;&nbsp;sleep(20);<br>
&nbsp;&nbsp;&nbsp;print('end work');<br>
}<br>
<br>
void main()<br>
{<br>
&nbsp;&nbsp;&nbsp;var TInteger i;<br>
&nbsp;&nbsp;&nbsp;i=queue('123',2,5,50);<br>
&nbsp;&nbsp;&nbsp;if(i==0)&nbsp;&nbsp;// got the resource<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('queue pass, to work');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;work();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;if(i==2) // queue is full<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('queue full, exit');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;print('in queue');<br>
&nbsp;&nbsp;&nbsp;sleep(200);&nbsp;&nbsp;// wait in queue<br>
<br>
&nbsp;&nbsp;&nbsp;on(queueResourceFree)&nbsp;&nbsp;// some resource is free<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('resource free');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;work();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;on(queueTimerExpire) // timeout<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('time out, exit');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br>
</div>