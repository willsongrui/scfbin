<h1>SYNOPSIS</h1>
<div class="dc">TInteger queue(TString key, TInteger maxServer, TInteger maxQueue, TInteger waitTime)</div><h1>DESCRIPTION</h1>
<div class="dc">To queue for waiting some resources duration the service logic execution</div><h1>ARGUMENTS</h1>
<div class="dc"><h4>key</h4>
<div class="dc">The queue identifier</div>
<h4>maxServer</h4>
<div class="dc">The max resource number for this queue.</div>
<h4>maxQueue</h4>
<div class="dc">The max queue length</div>
<h4>waitTime</h4>
<div class="dc">The max waiting time duration in queue</div>
</div><h1>RETURN VALUES</h1><div class="dc">
0: got the resource, and need not queue; 1: to queue; 2: the queue is full</div><h1>EXAMPLES</h1><div class="dc">
#progma c<br>
void work()<br>
{<br>
&nbsp;&nbsp;&nbsp;print('begin work');<br>
&nbsp;&nbsp;&nbsp;sleep(20);<br>
&nbsp;&nbsp;&nbsp;print('end work');<br>
}<br>
<br>
void main()<br>
{<br>
&nbsp;&nbsp;&nbsp;var TInteger i;<br>
&nbsp;&nbsp;&nbsp;i=queue('123',2,5,50);<br>
&nbsp;&nbsp;&nbsp;if(i==0)&nbsp;&nbsp;// got the resource<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('queue pass, to work');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;work();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;if(i==2) // queue is full<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('queue full, exit');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;print('in queue');<br>
&nbsp;&nbsp;&nbsp;sleep(200);&nbsp;&nbsp;// wait in queue<br>
<br>
&nbsp;&nbsp;&nbsp;on(queueResourceFree)&nbsp;&nbsp;// some resource is free<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('resource free');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;work();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;on(queueTimerExpire) // timeout<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('time out, exit');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br>
</div>